<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:sy="http://purl.org/rss/1.0/modules/syndication/" xmlns:media="http://search.yahoo.com/mrss/"><channel><title>Phoenix on こぴぺたん ログ</title><link>https://c-a-p-engineer.github.io/ja/tags/phoenix/</link><description>Recent content in Phoenix on こぴぺたん ログ</description><generator>Hugo -- gohugo.io</generator><language>ja</language><copyright>&amp;copy;{year}, All Rights Reserved</copyright><lastBuildDate>Tue, 28 Nov 2023 01:00:00 +0900</lastBuildDate><atom:link href="https://c-a-p-engineer.github.io/ja/tags/phoenix/index.xml" rel="self" type="application/rss+xml"/><item><title>【Elixir】Phoenix Liveview のファイルアップロードのテスト方法</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/11/28/elixir-phoenix-file-upload-test/</link><pubDate>Tue, 28 Nov 2023 01:00:00 +0900</pubDate><atom:modified>Tue, 28 Nov 2023 01:00:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/11/28/elixir-phoenix-file-upload-test/</guid><description>&lt;h1 id="elixirphoenix-liveview-のファイルアップロードのテスト方法">【Elixir】Phoenix Liveview のファイルアップロードのテスト方法&lt;/h1>
&lt;p>Elixir Phoenix の Liveview のファイルアップロードのテスト方法&lt;/p>
&lt;h2 id="環境">環境&lt;/h2>
&lt;ul>
&lt;li>Elixir 1.14.2&lt;/li>
&lt;li>Phoenix 1.6.3&lt;/li>
&lt;/ul>
&lt;h2 id="対象のコード">対象のコード&lt;/h2>
&lt;p>テストをする対象のコードはこちらになります。&lt;/p>
&lt;h3 id="elixirファイル">Elixirファイル&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lib/demo_web/live/file_upload/index.ex" data-lang="lib/demo_web/live/file_upload/index.ex">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">defmodule&lt;/span> &lt;span class="nc">DemoWeb.FileUploadLive.Index&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">use&lt;/span> &lt;span class="nc">DemoWeb&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="ss">:live_view&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">@impl&lt;/span> &lt;span class="no">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">def&lt;/span> &lt;span class="n">mount&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">_params&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">_session&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">socket&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ss">:ok&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">socket&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># アップロード設定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">|&amp;gt;&lt;/span> &lt;span class="n">allow_upload&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="ss">:image&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="ss">accept&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="sx">~w(.jpg .jpeg .png)&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">@impl&lt;/span> &lt;span class="no">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">def&lt;/span> &lt;span class="n">handle_event&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;validate&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">_params&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">socket&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:noreply&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">socket&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">@impl&lt;/span> &lt;span class="no">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">def&lt;/span> &lt;span class="n">handle_event&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;cancel-entry&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">%{&lt;/span>&lt;span class="s2">&amp;#34;ref&amp;#34;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="n">ref&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="n">socket&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># アップロードキャンセル&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:noreply&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cancel_upload&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">socket&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="ss">:image&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ref&lt;/span>&lt;span class="p">)}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">@impl&lt;/span> &lt;span class="no">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">def&lt;/span> &lt;span class="n">handle_event&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;save&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">_params&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">socket&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">uploaded_file&lt;/span> &lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">consume_uploaded_entries&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">socket&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="ss">:image&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">fn&lt;/span> &lt;span class="p">%{&lt;/span>&lt;span class="ss">path&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">path&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="n">entry&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ファイルアップロード処理&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># path はファイルがアップロードされた場所&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># entry はアップされたファイル情報&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nc">File&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cp!&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">entry&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">client_name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">entry&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">client_name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:noreply&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">socket&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">|&amp;gt;&lt;/span> &lt;span class="n">put_flash&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="ss">:info&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;ファイルアップロード完了&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">|&amp;gt;&lt;/span> &lt;span class="n">redirect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="ss">to&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">)}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="テンプレートファイル">テンプレートファイル&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html:lib/demo_web/live/file_upload/index.html.heex..html" data-lang="html:lib/demo_web/live/file_upload/index.html.heex..html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">form&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;post-form&amp;#34;&lt;/span> &lt;span class="na">phx-change&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;validate&amp;#34;&lt;/span> &lt;span class="na">phx-submit&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;save&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!-- アップロードされたらファイルアップ箇所は非表示 --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;columns is-centered&amp;#34;&lt;/span> &lt;span class="na">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">{&lt;/span> &lt;span class="na">if&lt;/span> &lt;span class="err">@&lt;/span>&lt;span class="na">uploads&lt;/span>&lt;span class="err">.&lt;/span>&lt;span class="na">image&lt;/span>&lt;span class="err">.&lt;/span>&lt;span class="na">entries&lt;/span> &lt;span class="err">!=&lt;/span> &lt;span class="err">[],&lt;/span> &lt;span class="na">do:&lt;/span> &lt;span class="err">&amp;#34;&lt;/span>&lt;span class="na">display:none&lt;/span>&lt;span class="err">&amp;#34;&lt;/span> &lt;span class="err">}&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!-- ファイルをドラッグ &amp;amp; ドロップでもアップロードすることが可能 --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;file is-boxed&amp;#34;&lt;/span> &lt;span class="na">phx-drop-target&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">{&lt;/span> &lt;span class="err">@&lt;/span>&lt;span class="na">uploads&lt;/span>&lt;span class="err">.&lt;/span>&lt;span class="na">image&lt;/span>&lt;span class="err">.&lt;/span>&lt;span class="na">ref&lt;/span> &lt;span class="err">}&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">label&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;file-label&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">&amp;lt;&lt;/span>%= live_file_input @uploads.image, class: &amp;#34;file-input&amp;#34; %&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">span&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;file-cta&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">span&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;file-label p-6&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Choose a file…
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">span&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">span&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">label&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">&amp;lt;&lt;/span>%=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # アップロードされたら表示
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> for entry &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">-&lt;/span> &lt;span class="err">@&lt;/span>&lt;span class="na">uploads&lt;/span>&lt;span class="err">.&lt;/span>&lt;span class="na">image&lt;/span>&lt;span class="err">.&lt;/span>&lt;span class="na">entries&lt;/span> &lt;span class="na">do&lt;/span> &lt;span class="err">%&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">figure&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">&amp;lt;&lt;/span>%= live_img_preview entry %&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">figcaption&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="err">&amp;lt;&lt;/span>%= entry.client_name %&amp;gt;&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">figcaption&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">figure&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">&amp;lt;&lt;/span>%=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # アップロードキャンセルボタン
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> submit gettext(&amp;#34;Cancel&amp;#34;), type: &amp;#34;button&amp;#34;, phx_click: &amp;#34;cancel-entry&amp;#34;, phx_value_ref: entry.ref %&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">&amp;lt;&lt;/span>%=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # エラー表示
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> for err &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">-&lt;/span> &lt;span class="na">upload_errors&lt;/span>&lt;span class="err">(@&lt;/span>&lt;span class="na">uploads&lt;/span>&lt;span class="err">.&lt;/span>&lt;span class="na">image&lt;/span>&lt;span class="err">,&lt;/span> &lt;span class="na">entry&lt;/span>&lt;span class="err">)&lt;/span> &lt;span class="na">do&lt;/span> &lt;span class="err">%&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;alert alert-danger&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="err">&amp;lt;&lt;/span>%= err %&amp;gt;&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">&amp;lt;&lt;/span>% end %&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">&amp;lt;&lt;/span>% end %&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">&amp;lt;&lt;/span>%= submit gettext(&amp;#34;Save&amp;#34;), phx_disable_with: gettext(&amp;#34;Saving...&amp;#34;) %&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">form&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="テスト">テスト&lt;/h2>
&lt;p>実際のテスト処理を書きます。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category></item><item><title>【Elixir】Phoenix 1.6 → 1.7 へのアップデートのメモ</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/11/26/elixir-phoenix-update/</link><pubDate>Sun, 26 Nov 2023 01:20:00 +0900</pubDate><atom:modified>Sun, 26 Nov 2023 01:20:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/11/26/elixir-phoenix-update/</guid><description>&lt;h1 id="elixirphoenix-16--17-へのアップデートのメモ">【Elixir】Phoenix 1.6 → 1.7 へのアップデートのメモ&lt;/h1>
&lt;p>Elixir Phoenix 1.6 → 1.7 へのアップデートしようとした際のメモ。&lt;/p>
&lt;p>&lt;strong>なおアップデートはしていない。&lt;/strong>&lt;/p>
&lt;h2 id="アップデート方法は3種類">アップデート方法は3種類&lt;/h2>
&lt;p>色々と試行錯誤を行った結果、以下の3種類のものをすべて試しました。それらを試した結果、僕は&lt;strong>アップデートを諦めました&lt;/strong>。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category></item><item><title>【Elixir】 PhoenixでバックグラウンドでルーティングのURLを取得する方法</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/09/15/elixir-backend-routing/</link><pubDate>Fri, 15 Sep 2023 01:30:00 +0900</pubDate><atom:modified>Fri, 15 Sep 2023 01:30:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/09/15/elixir-backend-routing/</guid><description>&lt;h1 id="elixir-phoenixでバックグラウンドでルーティングのurlを取得する方法">【Elixir】 PhoenixでバックグラウンドでルーティングのURLを取得する方法&lt;/h1>
&lt;p>ElixirのPhoenixフレームワークでWebアプリケーションを開発する際、バックグラウンドでルーティングのURLを取得するケースがあります。&lt;br />
&lt;code>conn&lt;/code>を使うパターンと使わないパターンについて説明します。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category></item><item><title>【Elixir】Ecto.Repoを拡張してSoft Deleteされていないレコードだけを取得する方法</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/09/14/elixir-repo-exstend/</link><pubDate>Thu, 14 Sep 2023 13:00:00 +0900</pubDate><atom:modified>Thu, 14 Sep 2023 13:00:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/09/14/elixir-repo-exstend/</guid><description>&lt;h1 id="elixirectorepoを拡張してsoft-deleteされていないレコードだけを取得する方法">【Elixir】Ecto.Repoを拡張してSoft Deleteされていないレコードだけを取得する方法&lt;/h1>
&lt;p>Elixirの&lt;code>Ecto.Repo&lt;/code>を拡張して、Soft Delete（&lt;code>deleted_at is nil&lt;/code>）されていないレコードだけを効率的に取得する方法について解説します。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category></item><item><title>【Elixir】サーバーから特定要素のイベントを実行する</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/09/11/elixir-liveview-js-exec/</link><pubDate>Mon, 11 Sep 2023 19:00:00 +0900</pubDate><atom:modified>Mon, 11 Sep 2023 19:00:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/09/11/elixir-liveview-js-exec/</guid><description>&lt;h1 id="elixirphoenix-独自に定義したイベントを実行する方法">【Elixir】Phoenix 独自に定義したイベントを実行する方法&lt;/h1>
&lt;p>Elixir Phoenix でサーバーから特定の要素のイベントを実行する方法のメモ。&lt;/p>
&lt;p>&lt;code>push_event&lt;/code> と組み合わせて特定の要素に設定されたイベントを実行します。&lt;br />
&lt;a href="https://hexdocs.pm/phoenix_live_view/0.19.5/Phoenix.LiveView.html#push_event/3">Phoenix.LiveView.html#push_event/3&lt;/a>&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category></item><item><title>【Elixir】Phoenix 独自に定義したJavaScriptを実行する方法</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/09/08/elixir-liveview-closing_attribute/</link><pubDate>Fri, 08 Sep 2023 01:40:00 +0900</pubDate><atom:modified>Fri, 08 Sep 2023 01:40:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/09/08/elixir-liveview-closing_attribute/</guid><description>&lt;h1 id="elixirphoenix-独自に定義したjavascriptを実行する方法">【Elixir】Phoenix 独自に定義したJavaScriptを実行する方法&lt;/h1>
&lt;p>Elixir Phoenixで独自に定義したJavaScriptを実行する方法メモ。&lt;br />
なぜか僕の環境ではちょっと面倒だったのでメモしました。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category></item><item><title>【Elixir】Phoenix のテンプレートエラー「expected closing `"` for attribute value」の解決方法</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/09/01/elixir-liveview-closing_attribute/</link><pubDate>Fri, 01 Sep 2023 01:20:00 +0900</pubDate><atom:modified>Fri, 01 Sep 2023 01:20:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/09/01/elixir-liveview-closing_attribute/</guid><description>&lt;h1 id="elixir-phoenixでのhtmlエラーexpected-closing--for-attribute-valueの解決方法">Elixir PhoenixでのHTMLエラー「expected closing &lt;code>&amp;quot;&lt;/code> for attribute value」の解決方法&lt;/h1>
&lt;p>Elixir Phoenix のテンプレートエラー「expected closing &lt;code>&amp;quot;&lt;/code> for attribute value」が出てしまった時の解決方法。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category></item><item><title>【Elixir】LiveView の render が発火しない時の対処方法</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/08/31/elixir-liveview-no-render/</link><pubDate>Thu, 31 Aug 2023 03:00:00 +0900</pubDate><atom:modified>Thu, 31 Aug 2023 03:00:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/08/31/elixir-liveview-no-render/</guid><description>&lt;h1 id="elixirliveview-の-render-が発火しない時の対処方法">【Elixir】LiveView の render が発火しない時の対処方法&lt;/h1>
&lt;p>Elixir LiveView の &lt;code>render&lt;/code> が発火しないという現象が発生してちょっと泣きを見たのでメモ。&lt;br />
&lt;code>render&lt;/code> で使用するテンプレートの切り替えを行っていたのですが発火してくれなくて画面が更新されなくて数時間奮闘するハメに…&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category></item><item><title>【Elixir】Phoenix PubSub を使ってリアルタイムデータ共有の方法</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/08/22/elixir_pubsub/</link><pubDate>Tue, 22 Aug 2023 13:00:00 +0900</pubDate><atom:modified>Tue, 22 Aug 2023 13:00:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/08/22/elixir_pubsub/</guid><description>&lt;h1 id="elixirphoenix-pubsub-を使ってリアルタイムデータ共有の方法">【Elixir】Phoenix PubSub を使ってリアルタイムデータ共有の方法&lt;/h1>
&lt;p>Phoenix PubSubは、Elixirを使用したリアルタイムデータ共有の鍵となる機能です。&lt;br />
リアルタイムに他のユーザなどにデータ共有が可能です。&lt;br />
Phoenix PubSubの基本的な使用方法からサブスクライブの停止までの詳細なプロセスを紹介しています。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category></item><item><title>【Elixir】LiveView で使用するテンプレートファイルを変更する方法</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/07/22/elixir-liveview-render/</link><pubDate>Sat, 22 Jul 2023 15:00:00 +0900</pubDate><atom:modified>Sat, 22 Jul 2023 15:00:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/07/22/elixir-liveview-render/</guid><description>&lt;h1 id="elixir-liveview-で使用するテンプレートファイルを変更する方法">Elixir LiveView で使用するテンプレートファイルを変更する方法&lt;/h1>
&lt;p>Elixir の LiveView でテンプレートファイルを変更したい場合があります。&lt;br />
今回は対処方法についてまとめました。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category></item><item><title>【Elixir】Phoenix LiveComponentの簡単なサンプル実装</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/07/10/elixir-phoenix-live_component/</link><pubDate>Mon, 10 Jul 2023 10:00:00 +0900</pubDate><atom:modified>Mon, 10 Jul 2023 10:00:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/07/10/elixir-phoenix-live_component/</guid><description>&lt;h1 id="elixirphoenix-livecomponentの簡単なサンプル実装">【Elixir】Phoenix LiveComponentの簡単なサンプル実装&lt;/h1>
&lt;p>LiveComponentのクリックするたびに数値が増減するというシンプルなアプリケーションの作り方について解説します。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category></item><item><title>【Elixir】Phoenix サーバーサイドからリアルタイム通知する</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/07/06/elixir-phoenix-channel/</link><pubDate>Thu, 06 Jul 2023 19:20:00 +0900</pubDate><atom:modified>Thu, 06 Jul 2023 19:20:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/07/06/elixir-phoenix-channel/</guid><description>&lt;h1 id="elixirphoenix-サーバーサイドからユーザーにリアルタイム通知する">【Elixir】Phoenix サーバーサイドからユーザーにリアルタイム通知する&lt;/h1>
&lt;p>Elixir Phoenix サーバーサイドからユーザーに簡単にリアルタイム通知することが可能です。&lt;/p>
&lt;h2 id="確認環境">確認環境&lt;/h2>
&lt;ul>
&lt;li>Elixir 1.14.2&lt;/li>
&lt;li>Phoenix 1.6.3&lt;/li>
&lt;/ul>
&lt;h1 id="elixir-phoenixでの通知システムの作成">Elixir Phoenixでの通知システムの作成&lt;/h1>
&lt;p>ElixirとPhoenixを使用して、リアルタイムの通知システムを作成する方法を探求します。このシステムは、特定のユーザーに対してメッセージの通知を送ることができ、ログイン中の全画面に適用されます。さらに、サーバーから特定のユーザーに通知を送ることも可能です。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category></item><item><title>【Elixir】Phoenix push_event を活用してJavaScriptを実行する</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/06/26/elixir-phoenix-push_event/</link><pubDate>Mon, 26 Jun 2023 18:50:00 +0900</pubDate><atom:modified>Mon, 26 Jun 2023 18:50:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/06/26/elixir-phoenix-push_event/</guid><description>&lt;h1 id="elixirphoenix-push_event-を活用してjavascriptを実行する">【Elixir】Phoenix push_event を活用してJavaScriptを実行する&lt;/h1>
&lt;p>ElixirのPhoenixフレームワークでは、サーバーからクライアントへのイベントをプッシュするための&lt;code>push_event&lt;/code>という機能が提供されています。&lt;br />
これを利用することで、サーバー側からクライント側のJavaScriptに対してイベントを発行し、特定の操作を行うことが可能になります。&lt;br />
&lt;code>push_event&lt;/code> を活用してJavaScriptを実行してみます。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category></item><item><title>【Elixir】Phoenixでのレイアウトテンプレート設定方法</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/06/25/elixir-phoenix-layout/</link><pubDate>Sun, 25 Jun 2023 19:00:00 +0900</pubDate><atom:modified>Sun, 25 Jun 2023 19:00:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/06/25/elixir-phoenix-layout/</guid><description>&lt;h1 id="elixirphoenixでのレイアウトテンプレート設定方法">【Elixir】Phoenixでのレイアウトテンプレート設定方法&lt;/h1>
&lt;p>Elixir Phoenixでのレイアウトテンプレート設定方法。&lt;/p>
&lt;h2 id="確認環境">確認環境&lt;/h2>
&lt;ul>
&lt;li>Elixir 1.14.2&lt;/li>
&lt;li>Phoenix 1.6.3&lt;/li>
&lt;/ul>
&lt;h2 id="アクションの設定">アクションの設定&lt;/h2>
&lt;p>&lt;code>put_layout&lt;/code> を利用することでテンプレートを変更することが可能です。&lt;br />
基本的な使い方は以下のようになります。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category></item><item><title>【Elixir】タイムゾーンエラーの解決策</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/06/16/elixir-utc_only_time_zone_database/</link><pubDate>Fri, 16 Jun 2023 01:30:00 +0900</pubDate><atom:modified>Fri, 16 Jun 2023 01:30:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/06/16/elixir-utc_only_time_zone_database/</guid><description>&lt;h1 id="elixirタイムゾーンエラーの解決策">【Elixir】タイムゾーンエラーの解決策&lt;/h1>
&lt;p>Elixirで日付と時間を扱う際には、&lt;code>DateTime&lt;/code>モジュールが一般的に使用されます。&lt;br />
しかし、特定のタイムゾーンを指定して現在の日時を取得しようとすると、&lt;code>cannot get current datetime in &amp;quot;Japan&amp;quot; time zone, reason: :utc_only_time_zone_database&lt;/code>というエラーが発生することがあります。&lt;br />
このエラーの原因と解決策について詳しく説明します。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category></item><item><title>【Elixir】Phoenixでのエラー解決: Stateful ComponentsのHTML Root Tag</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/06/16/elixir-phoenix-components-root/</link><pubDate>Fri, 16 Jun 2023 01:20:00 +0900</pubDate><atom:modified>Fri, 16 Jun 2023 01:20:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/06/16/elixir-phoenix-components-root/</guid><description>&lt;h1 id="elixirphoenixでのエラー解決-stateful-componentsのhtml-root-tag">【Elixir】Phoenixでのエラー解決: Stateful ComponentsのHTML Root Tag&lt;/h1>
&lt;p>ライブコンポーネント作成時に出たエラーの解決方法について調べてみました。&lt;/p>
&lt;pre tabindex="0">&lt;code>error on render/1 with id of &amp;#34;demo&amp;#34;. Stateful components must have a single static HTML tag at the root
&lt;/code>&lt;/pre>&lt;p>このエラーは、Stateful component (状態を保持するコンポーネント) が一つの静的なHTMLタグをルート（最上位）に持たなければならないという規則に違反している時に発生します。&lt;br />
これは、LiveViewでstatefulコンポーネントを扱う際の基本的なルールです。&lt;br />
これにより、Phoenixはコンポーネントのライフサイクルを正しく管理し、必要な更新を適切に行うことができます。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category></item><item><title>【Elixir】Phoenixでカスタムセッションストアを作る</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/05/26/elixir-phoenix-session-store/</link><pubDate>Fri, 26 May 2023 01:40:00 +0900</pubDate><atom:modified>Fri, 26 May 2023 01:40:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/05/26/elixir-phoenix-session-store/</guid><description>&lt;h1 id="elixirphoenixでカスタムセッションストアを作る">【Elixir】Phoenixでカスタムセッションストアを作る&lt;/h1>
&lt;p>Elixir Phoenixで自作のセッションストアを作る方法についてやっていきます。&lt;br />
今回はセッション情報を各セッションID名のJSONに保存するというセッションストアを作っていきます。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category></item><item><title>【Elixir】Ecto.Schema.embedded_schema を使ってリクエストを処理する方法</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/03/21/elixir-embedded_schema/</link><pubDate>Tue, 21 Mar 2023 12:40:00 +0900</pubDate><atom:modified>Tue, 21 Mar 2023 12:40:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/03/21/elixir-embedded_schema/</guid><description>&lt;h1 id="elixirectoschemaembedded_schema-を複雑な使ってリクエストに対してのリクエストを処理する方法のメモ">【Elixir】Ecto.Schema.embedded_schema を複雑な使ってリクエストに対してのリクエストを処理する方法のメモ&lt;/h1>
&lt;p>Elixir で LiveView に対する認証・認可を自作する&lt;/p>
&lt;p>以下のドキュメントを参考にしています。&lt;br />
&lt;a href="https://hexdocs.pm/ecto/3.9.4/Ecto.Schema.html#t:embedded_schema/0" target="_blank" rel="nofollow noopener">Ecto.Schema — Ecto v3.9.4 - HexDocs # embedded_schema&lt;/a>&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category></item><item><title>【Elixir】Phoenix LiveView でJSを書かずにアニメーションなどを実装する</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/03/15/elixir-phoenix-live-js/</link><pubDate>Wed, 15 Mar 2023 18:30:00 +0900</pubDate><atom:modified>Wed, 15 Mar 2023 18:30:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/03/15/elixir-phoenix-live-js/</guid><description>&lt;h1 id="elixirphoenix-liveview-でjsを書かずにアニメーションなどを実装する方法">【Elixir】Phoenix LiveView でJSを書かずにアニメーションなどを実装する方法&lt;/h1>
&lt;p>Elixir の Phoenix LiveView でJSを書かずにアニメーションなどを実装する方法。&lt;br />
折角 LiveView を使っているのに一々画面項目の表示/非表示などの簡単なJSを一々書きたくないなって考えたら実装方法がありましたのでメモ。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category><category>Phoenix</category></item><item><title>【Elixir】Phoenix で PhoenixLiveSession を使用して LiveView で Session を使用する</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/03/14/elixir-phoenix-live-session/</link><pubDate>Tue, 14 Mar 2023 12:30:00 +0900</pubDate><atom:modified>Sun, 16 Apr 2023 00:40:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/03/14/elixir-phoenix-live-session/</guid><description>&lt;h1 id="elixirphoenix-で-phoenixlivesession-を使用して-liveview-で-session-を使用する">【Elixir】Phoenix で PhoenixLiveSession を使用して LiveView で Session を使用する&lt;/h1>
&lt;p>Elixir Phoenix で PhoenixLiveSession を使用して LiveView で Session を使用する方法。&lt;br />
通常 LiveView 上では Session を扱えません。&lt;br />
Session を扱えるように PhoenixLiveSession を導入する必要があります。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category><category>Phoenix</category></item><item><title>【Elixir】Phoenix で静的ファイルを追加する</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/03/08/elixir-phoenix-static-file/</link><pubDate>Thu, 09 Mar 2023 12:30:00 +0900</pubDate><atom:modified>Thu, 09 Mar 2023 12:30:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/03/08/elixir-phoenix-static-file/</guid><description>&lt;h1 id="elixirphoenix-で静的ファイルを追加する">【Elixir】Phoenix で静的ファイルを追加する&lt;/h1>
&lt;p>Elixir Phoenix の環境で静的ファイルを追加する方法&lt;/p>
&lt;h2 id="環境">環境&lt;/h2>
&lt;ul>
&lt;li>Elixir 1.14.2&lt;/li>
&lt;li>Phoenix 1.6.3&lt;/li>
&lt;/ul>
&lt;h2 id="静的ファイルを追加する">静的ファイルを追加する&lt;/h2>
&lt;ol>
&lt;li>&lt;code>priv/static/&lt;/code> にフォルダを追加します。&lt;/li>
&lt;li>&lt;code>lib/demo_web/endpoint.ex&lt;/code> に追加したフォルダ名を追加&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>&lt;code>only&lt;/code> の箇所に &lt;code>hoge&lt;/code> 追加&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="hl">&lt;span class="lnt">5
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lib/demo_web/endpoint.ex" data-lang="lib/demo_web/endpoint.ex">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plug&lt;/span> &lt;span class="nc">Plug.Static&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ss">at&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ss">from&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="ss">:sdm&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ss">gzip&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="no">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line hl">&lt;span class="cl"> &lt;span class="ss">only&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="sx">~w(assets fonts images favicon.ico robots.txt hoge)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>&lt;code>Routes.static_path&lt;/code> を使用してテンプレート側で使用する。&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html:lib/demo_web/templates/hoge/hoge.html.heex..html" data-lang="html:lib/demo_web/templates/hoge/hoge.html.heex..html">&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">img&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">{Routes.static_path(@conn,&lt;/span> &lt;span class="err">&amp;#34;/&lt;/span>&lt;span class="na">hoge&lt;/span>&lt;span class="err">/&lt;/span>&lt;span class="na">hoge&lt;/span>&lt;span class="err">.&lt;/span>&lt;span class="na">png&lt;/span>&lt;span class="err">&amp;#34;)}&lt;/span> &lt;span class="na">alt&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;hoge&amp;#34;&lt;/span>&lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>これにより画像などの静的ファイルの呼び出しが可能になります。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category><category>Phoenix</category></item><item><title>【Elixir】ログイン制御 セッションでアクセス制限を実現する</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/03/02/elixir-session-auth/</link><pubDate>Thu, 02 Mar 2023 18:30:00 +0900</pubDate><atom:modified>Thu, 02 Mar 2023 18:30:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/03/02/elixir-session-auth/</guid><description>&lt;h1 id="elixirログイン制御-セッションでアクセス制限を実現する">【Elixir】ログイン制御 セッションでアクセス制限を実現する&lt;/h1>
&lt;p>Elixir でログイン制御 セッションでアクセス制限を実現する&lt;/p>
&lt;h2 id="環境">環境&lt;/h2>
&lt;ul>
&lt;li>Elixir 1.14.2&lt;/li>
&lt;li>Phoenix 1.6.3&lt;/li>
&lt;/ul>
&lt;h2 id="セッション制御">セッション制御&lt;/h2>
&lt;p>特定のセッション（ログインなど）がない場合にアクセスが出来ないようにします。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category><category>Phoenix</category></item><item><title>【Elixir】Phoenix 5分でCRUDを作ってみます！</title><link>https://c-a-p-engineer.github.io/ja/tech/2023/01/29/elixir-phoenix-crud/</link><pubDate>Sun, 29 Jan 2023 15:20:00 +0900</pubDate><atom:modified>Sun, 29 Jan 2023 15:20:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2023/01/29/elixir-phoenix-crud/</guid><description>&lt;h1 id="elixirphoenix-5分でcrudを作ってみます">【Elixir】Phoenix 5分でCRUDを作ってみます！&lt;/h1>
&lt;p>Elixir Phoenix で5分でCRUDをやってみます！&lt;/p>
&lt;p>インストール関係は省きます。&lt;br />
今回 &lt;code>demo&lt;/code> という名前でプロジェクトを作っています。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category></item><item><title>【Elixir】Phoenix で Quantum を使用してプログラム定期実行する方法</title><link>https://c-a-p-engineer.github.io/ja/tech/2022/12/30/elixir-phoenix-quantum/</link><pubDate>Fri, 30 Dec 2022 16:00:00 +0900</pubDate><atom:modified>Fri, 30 Dec 2022 16:00:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2022/12/30/elixir-phoenix-quantum/</guid><description>&lt;h1 id="elixirphoenix-で-quantum-を使用してプログラム定期実行する方法">【Elixir】Phoenix で Quantum を使用してプログラム定期実行する方法&lt;/h1>
&lt;p>Elixir Phoenix 環境で Quantum を使用してプログラム定期実行する方法&lt;/p>
&lt;p>Quantum のドキュメントはこちら&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/quantum-elixir/quantum-core" target="_blank" rel="nofollow noopener">quantum-elixir/quantum-core: Cron-like job scheduler for Elixir&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://hexdocs.pm/quantum/3.5.0/readme.html" target="_blank" rel="nofollow noopener">Quantum — Quantum v3.5.0&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="環境">環境&lt;/h2>
&lt;ul>
&lt;li>Elixir 1.14.2&lt;/li>
&lt;li>Phoenix 1.6.3&lt;/li>
&lt;li>Quantum 3.5.0&lt;/li>
&lt;/ul>
&lt;h2 id="サンプル">サンプル&lt;/h2>
&lt;p>GitHub を見つつ進めていきます。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category></item><item><title>【Elixir】 Phoenix で LiveView を使ってみる</title><link>https://c-a-p-engineer.github.io/ja/tech/2022/12/27/elixir-phoenix-liveview/</link><pubDate>Tue, 27 Dec 2022 02:40:00 +0900</pubDate><atom:modified>Tue, 27 Dec 2022 02:40:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2022/12/27/elixir-phoenix-liveview/</guid><description>&lt;h1 id="elixir-phoenix-で-liveview-を使ってみる">【Elixir】 Phoenix で LiveView を使ってみる&lt;/h1>
&lt;p>今回はLiveViewを使ってバックエンドだけでリッチなフロントエンドを作成してみます。&lt;br />
&lt;a href="https://hexdocs.pm/phoenix_live_view/0.17.5/Phoenix.LiveView.html">Phoenix.LiveView — Phoenix LiveView v0.17.5&lt;/a>&lt;/p>
&lt;h2 id="環境">環境&lt;/h2>
&lt;ul>
&lt;li>Elixir 1.14.2&lt;/li>
&lt;li>Phoenix 1.6.3&lt;/li>
&lt;li>LiveView 0.17.5&lt;/li>
&lt;/ul>
&lt;h2 id="サンプル">サンプル&lt;/h2>
&lt;p>こちらの参考ページを元に進めていきます。&lt;br />
&lt;a href="https://www.wintermeyer-consulting.de/books/phoenix/1.5/phoenix-liveview-basics.html" target="_blank" rel="nofollow noopener">Phoenix LiveView Basics :: Phoenix Beginner&amp;rsquo;s Guide&lt;/a>&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/Official_Elixir_logo.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Elixir</category><category>Phoenix</category><category>Elixir</category></item><item><title>【Docker】Elixir Phoenix の環境を作る</title><link>https://c-a-p-engineer.github.io/ja/tech/2022/12/27/docker-elixir-phoenix/</link><pubDate>Tue, 27 Dec 2022 01:40:00 +0900</pubDate><atom:modified>Tue, 27 Dec 2022 01:40:00 +0900</atom:modified><guid>https://c-a-p-engineer.github.io/ja/tech/2022/12/27/docker-elixir-phoenix/</guid><description>&lt;h1 id="dockerelixir-phoenix-の環境を作る">【Docker】Elixir Phoenix の環境を作る&lt;/h1>
&lt;p>Docker で Elixir Phoenix の環境を作る&lt;/p>
&lt;h2 id="作成する環境">作成する環境&lt;/h2>
&lt;ul>
&lt;li>Elixir 1.14.2&lt;/li>
&lt;li>Phoenix 1.6.3&lt;/li>
&lt;/ul>
&lt;h2 id="docker-compose-ファイル作成">Docker Compose ファイル作成&lt;/h2>
&lt;p>&lt;code>docker-compose.yml&lt;/code> を用意します。&lt;br />
作るのは Elixir Phoenix の環境です。&lt;br />
Postgresも入っています。&lt;/p></description><dc:creator>こぴぺたん</dc:creator><media:content url="https://c-a-p-engineer.github.io/images/thumbnail/docker.png" medium="image"><media:title type="html">featured image</media:title></media:content><category>Docker</category><category>Elixir</category><category>Phoenix</category><category>Docker</category></item></channel></rss>